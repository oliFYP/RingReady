import{r as l,k as f,l as F,j as e,m as P,f as w,a as g,y as E,p as $,z as b,A as q,B as C,C as D,D as A,E as y,G as S,g as B,h as I}from"./index-CdVE4p9h.js";import{u as R,c as T,a as U,b as j,d as n,e as z}from"./index.esm-D4D6tYqV.js";function M(){const[d,o]=l.useState(!1),[m,c]=l.useState(""),[p,x]=l.useState(null),{currentUser:u,userProfile:r}=f(),N=F(),t=R({initialValues:{title:"",description:"",location:"",date:"",time:"",ticketPrice:0,capacity:100,image:null},validationSchema:T({title:n().required("Event title is required"),description:n().required("Event description is required"),location:n().required("Event location is required"),date:z().required("Event date is required").min(new Date,"Event date must be in the future"),time:n().required("Event time is required"),ticketPrice:j().min(0,"Price cannot be negative").required("Ticket price is required"),capacity:j().min(1,"Capacity must be at least 1").required("Capacity is required"),image:U()}),onSubmit:async i=>{if(!u){c("You must be logged in to create an event");return}if((r==null?void 0:r.role)!=="organizer"){c("Only organizers can create events");return}try{o(!0),c("");let a=null;if(i.image){const h=q(C,`events/${Date.now()}_${i.image.name}`);await D(h,i.image),a=await A(h)}const s={title:i.title,description:i.description,location:i.location,date:new Date(`${i.date}T${i.time}`),time:i.time,ticketPrice:Number(i.ticketPrice),capacity:Number(i.capacity),remaining:Number(i.capacity),ticketsSold:0,imageUrl:a,createdBy:u.uid,organizerName:(r==null?void 0:r.displayName)||"Event Organizer",createdAt:y(),updatedAt:y(),boxers:[],attendees:[]},k=await S(B(I,"events"),s);N(`/events/${k.id}`)}catch(a){console.error("Error creating event:",a),c("Failed to create event. Please try again.")}finally{o(!1)}}}),v=i=>{const a=i.target.files[0];if(a){t.setFieldValue("image",a);const s=new FileReader;s.onload=()=>{x(s.result)},s.readAsDataURL(a)}};return e.jsx("div",{className:"pt-16 min-h-screen",children:e.jsx("section",{className:"section bg-light",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"card p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Boxing Event"}),e.jsx("p",{className:"text-gray-600",children:"Fill out the form below to create a new boxing event"})]}),m&&e.jsx("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-lg",children:m}),e.jsxs("form",{onSubmit:t.handleSubmit,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Event Title"}),e.jsx("input",{id:"title",name:"title",type:"text",className:`input ${t.touched.title&&t.errors.title?"border-red-500":""}`,placeholder:"e.g., Amateur Boxing Championship",...t.getFieldProps("title")}),t.touched.title&&t.errors.title&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 font-medium mb-2",children:"Event Description"}),e.jsx("textarea",{id:"description",name:"description",rows:"4",className:`input ${t.touched.description&&t.errors.description?"border-red-500":""}`,placeholder:"Describe your event...",...t.getFieldProps("description")}),t.touched.description&&t.errors.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.description})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"location",className:"block text-gray-700 font-medium mb-2",children:[e.jsx(w,{className:"inline-block mr-2 text-primary-600"}),"Location"]}),e.jsx("input",{id:"location",name:"location",type:"text",className:`input ${t.touched.location&&t.errors.location?"border-red-500":""}`,placeholder:"e.g., Downtown Arena, New York",...t.getFieldProps("location")}),t.touched.location&&t.errors.location&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.location})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 font-medium mb-2",children:[e.jsx(g,{className:"inline-block mr-2 text-primary-600"}),"Date"]}),e.jsx("input",{id:"date",name:"date",type:"date",className:`input ${t.touched.date&&t.errors.date?"border-red-500":""}`,...t.getFieldProps("date")}),t.touched.date&&t.errors.date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.date})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"time",className:"block text-gray-700 font-medium mb-2",children:[e.jsx(g,{className:"inline-block mr-2 text-primary-600"}),"Time"]}),e.jsx("input",{id:"time",name:"time",type:"time",className:`input ${t.touched.time&&t.errors.time?"border-red-500":""}`,...t.getFieldProps("time")}),t.touched.time&&t.errors.time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.time})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ticketPrice",className:"block text-gray-700 font-medium mb-2",children:[e.jsx(E,{className:"inline-block mr-2 text-primary-600"}),"Ticket Price ($)"]}),e.jsx("input",{id:"ticketPrice",name:"ticketPrice",type:"number",min:"0",step:"0.01",className:`input ${t.touched.ticketPrice&&t.errors.ticketPrice?"border-red-500":""}`,placeholder:"0.00",...t.getFieldProps("ticketPrice")}),t.touched.ticketPrice&&t.errors.ticketPrice&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.ticketPrice})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"capacity",className:"block text-gray-700 font-medium mb-2",children:[e.jsx($,{className:"inline-block mr-2 text-primary-600"}),"Capacity"]}),e.jsx("input",{id:"capacity",name:"capacity",type:"number",min:"1",className:`input ${t.touched.capacity&&t.errors.capacity?"border-red-500":""}`,placeholder:"100",...t.getFieldProps("capacity")}),t.touched.capacity&&t.errors.capacity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.errors.capacity})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 font-medium mb-2",children:[e.jsx(b,{className:"inline-block mr-2 text-primary-600"}),"Event Image"]}),e.jsx("div",{className:"mt-1 flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg",children:p?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:"Preview",className:"max-h-48 rounded"}),e.jsx("button",{type:"button",onClick:()=>{x(null),t.setFieldValue("image",null)},className:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-full",children:"Ã—"})]}):e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsxs("div",{className:"text-gray-600",children:[e.jsx(b,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2",children:"Upload an image for your event"}),e.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]}),e.jsx("button",{type:"button",className:"btn-outline py-2 px-4",onClick:()=>document.getElementById("image-upload").click(),children:"Select Image"}),e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",className:"hidden",onChange:v})]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:d,children:d?"Creating Event...":"Create Event"})})]})]})})})})}export{M as default};
