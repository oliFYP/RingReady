import{k as C,r as c,j as e,b as L,c as O,a as h,m as p,L as n,O as R,g as Y,h as I,q as y,P as b,o as j,i as N}from"./index-EEsZY6UW.js";import{f as u}from"./format-sbWH3_uq.js";function W(){const{currentUser:l,userProfile:t}=C(),[S,v]=c.useState(!0),[f,T]=c.useState([]),[w,F]=c.useState([]),[k,$]=c.useState([]),[o,E]=c.useState("tickets");c.useEffect(()=>{async function s(){if(l)try{v(!0);const a=Y(I,"events"),U=y(a,b("attendees","array-contains",l.uid),j("date","asc")),A=(await N(U)).docs.map(i=>{var m;return{id:i.id,...i.data(),date:((m=i.data().date)==null?void 0:m.toDate())||new Date}});if(T(A),(t==null?void 0:t.role)==="boxer"){const i=y(a,b("boxers","array-contains",l.uid),j("date","asc")),x=(await N(i)).docs.map(r=>{var d;return{id:r.id,...r.data(),date:((d=r.data().date)==null?void 0:d.toDate())||new Date}});F(x)}if((t==null?void 0:t.role)==="organizer"){const i=y(a,b("createdBy","==",l.uid),j("date","asc")),x=(await N(i)).docs.map(r=>{var d;return{id:r.id,...r.data(),date:((d=r.data().date)==null?void 0:d.toDate())||new Date}});$(x),x.length>0&&E("organized")}}catch(a){console.error("Error fetching user data:",a)}finally{v(!1)}}s()},[l,t]);const B=[{id:"tickets",label:"My Tickets",icon:e.jsx(L,{})},...(t==null?void 0:t.role)==="boxer"?[{id:"boxing",label:"My Fights",icon:e.jsx(O,{})}]:[],...(t==null?void 0:t.role)==="organizer"?[{id:"organized",label:"My Events",icon:e.jsx(h,{})}]:[]],g=[{id:"1",title:"Amateur Boxing Championship",location:"Downtown Arena, New York",date:new Date(Date.now()+7*24*60*60*1e3),ticketPrice:25,imageUrl:"https://images.pexels.com/photos/4761671/pexels-photo-4761671.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"}],M=f.length>0?f:g,D=w.length>0?w:g,z=k.length>0?k:g;return e.jsx("div",{className:"pt-16 min-h-screen bg-gray-100",children:e.jsx("section",{className:"section",children:e.jsx("div",{className:"container-custom",children:e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",(t==null?void 0:t.displayName)||"User","!"]})]}),(t==null?void 0:t.role)==="organizer"&&e.jsxs(n,{to:"/create-event",className:"btn-primary mt-4 md:mt-0 flex items-center justify-center gap-2",children:[e.jsx(R,{}),e.jsx("span",{children:"Create Event"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex -mb-px space-x-8",children:B.map(s=>e.jsxs("button",{className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${o===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>E(s.id),children:[e.jsx("span",{className:"mr-2",children:s.icon}),s.label]},s.id))})})}),S?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg font-medium text-gray-700",children:"Loading your data..."})]}):e.jsxs("div",{children:[o==="tickets"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"My Tickets"}),M.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-soft",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't purchased any tickets yet."}),e.jsx(n,{to:"/events",className:"btn-primary",children:"Browse Events"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(s=>e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-cover bg-center",style:{backgroundImage:`url(${s.imageUrl||"https://images.pexels.com/photos/4761679/pexels-photo-4761679.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"})`},children:e.jsx("div",{className:"h-full flex items-end p-4",children:e.jsxs("span",{className:"bg-primary-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:["$",s.ticketPrice]})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-1",children:[e.jsx(h,{className:"mr-2 text-primary-500"}),e.jsx("span",{children:u(s.date,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx("span",{className:"mr-2",children:"üìç"}),e.jsx("span",{children:s.location})]}),e.jsx(n,{to:`/events/${s.id}`,className:"btn-primary w-full",children:"View Ticket"})]})]},s.id))})]}),o==="boxing"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"My Fights"}),D.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-soft",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No fights found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't joined any boxing events yet."}),e.jsx(n,{to:"/events",className:"btn-primary",children:"Find Events"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(s=>e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-cover bg-center",style:{backgroundImage:`url(${s.imageUrl||"https://images.pexels.com/photos/4761679/pexels-photo-4761679.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"})`},children:e.jsx("div",{className:"h-full w-full bg-gradient-to-t from-black/60 to-transparent flex items-end",children:e.jsx("div",{className:"p-4 text-white",children:e.jsx("span",{className:"bg-secondary-500 text-dark px-3 py-1 rounded-full text-sm font-medium mb-2 inline-block",children:"Fighter"})})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-1",children:[e.jsx(h,{className:"mr-2 text-primary-500"}),e.jsx("span",{children:u(s.date,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx("span",{className:"mr-2",children:"üìç"}),e.jsx("span",{children:s.location})]}),e.jsx(n,{to:`/events/${s.id}`,className:"btn-primary w-full",children:"Event Details"})]})]},s.id))})]}),o==="organized"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"My Organized Events"}),z.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-soft",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No events found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't created any events yet."}),e.jsx(n,{to:"/create-event",className:"btn-primary",children:"Create Event"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:z.map(s=>{var a;return e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"h-48 md:h-auto md:w-1/3 bg-cover bg-center",style:{backgroundImage:`url(${s.imageUrl||"https://images.pexels.com/photos/4761679/pexels-photo-4761679.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"})`}}),e.jsxs("div",{className:"p-6 md:w-2/3",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-1",children:[e.jsx(h,{className:"mr-2 text-primary-500"}),e.jsx("span",{children:u(s.date,"EEEE, MMMM d, yyyy")})]}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-4",children:[e.jsx("span",{className:"mr-2",children:"üìç"}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tickets Sold"}),e.jsx("p",{className:"text-xl font-bold",children:s.ticketsSold||0})]}),e.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Registered Boxers"}),e.jsx("p",{className:"text-xl font-bold",children:((a=s.boxers)==null?void 0:a.length)||0})]})]}),e.jsx(n,{to:`/events/${s.id}`,className:"btn-primary w-full",children:"Manage Event"})]})]})},s.id)})})]})]})]})})})})}export{W as default};
